{"version":3,"file":"list.js","sources":["pages/list/list.vue","pages/list/list.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"listContainer\">\n\t\t<CustomNav back=\"true\" :topHeight=\"110\">\n\t\t\t<scroll-view scroll-x class=\"menuList\">\n\t\t\t\t<view class=\"menubutton\" v-for=\"item in subMenus\" @click=\"changeSubMenu(item.id)\">\n\t\t\t\t\t<view class=\"top\">\n\t\t\t\t\t\t<image :src=\"item.img\" mode=\"scaleToFill\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"bottom\" :style=\"{color : activeSubMenuId == item.id ? 'rgb(255, 128, 0)':'rgb(160, 160, 160)'}\">\n\t\t\t\t\t\t{{item.name}}\n\t\t\t\t\t\t<view :class=\"{'bottomShow animate__slideInUp' : item.id == activeSubMenuId}\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</CustomNav>\n\t\t<view class=\"itemList\">\n\t\t\t<scroll-view  scroll-y=\"true\" :style=\"{height:screenHeight+'px'}\" style=\"background-color: rgb(247, 247, 247);\"  @scrolltolower=\"downSrolltolower\">\n\t\t\t\t<view class=\"listItem\">\t\n\t\t\t\t\t\t<view class=\"itemContent\" v-for=\"item in itemList\" @click=\"item.type == '二手商品' ? clickOldItemDetail(item.id) : clickNewItemDetail(item.id)\">\n\t\t\t\t\t\t\t\t<view class=\"itemTop\">\n\t\t\t\t\t\t\t\t\t<image :src=\"item.img\" mode=\"scaleToFill\"></image>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"itemBottom\">\n\t\t\t\t\t\t\t\t\t<view class=\"itemBottomTitle\">{{item.title}}</view>\n\t\t\t\t\t\t\t\t\t<view class=\"itemBottom1\"><view class=\"itemBottom1Right\">{{item.color}}</view><view class=\"itemBottom1Left\">{{item.storage}}</view></view>\n\t\t\t\t\t\t\t\t\t<view class=\"itemBottom2\" v-if=\"item.type == '二手商品'\"><text class=\"priceT\">现价 </text><text class=\"price\">{{formattedPrice(item.price2)}}</text> 韩元</view>\n\t\t\t\t\t\t\t\t\t<view class=\"itemBottom2\" v-else><text class=\"priceT\">现价 </text><text class=\"price\">{{formattedPrice(item.price1)}}</text> 韩元</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\t\n\t\t\t\t</view>\n\t\t\t\t<view class=\"loading\">\n\t\t\t\t\t<uni-load-more :status=\"loadingStatus\" :iconSize=\"30\" iconType=\"circle\" :content-text=\"contentText\" :color=\"color\"></uni-load-more>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"hiddenLoading\">\t\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport CustomNav from '@/components/custom-nav-bar/customNav.vue';\nimport {getNaviBar} from '@/utill/systemData.js'\nimport { servicePost } from '@/utill/request';\nimport {formattedPrice} from \"@/utill/common.js\";\nimport { ref } from 'vue';\nexport default{\n\tcomponents:{\n\t\tCustomNav,\n\t},\n\tprops:{\n\t\t\n\t},\n\tsetup(props, context) {\n\t\tconst screenHeight = getNaviBar().noTabScreen()-100;\n\t\t//로딩,더보기 등부분\n\t\tconst loadingStatus = ref('more');\n\t\tconst color = ref('rgb(255, 128, 0)');\n\t\t//윗부분에 서브메뉴 클릭아이디표시 \n\t\tconst activeSubMenuId = ref(0);\n\t\t//윗부분 서브메뉴\n\t\tconst subMenus = ref([]);\n\t\t//아이템리스트부분\n\t\tconst itemList = ref([]);\n\t\t//페이징 부분\n\t\tconst currentPage = ref(1);\n\t\tconst limit = 10;\n\t\treturn{\n\t\t\tservicePost,\n\t\t\titemList,\n\t\t\tscreenHeight,\n\t\t\tloadingStatus,\n\t\t\tcontentText: {\n\t\t\t\tcontentdown: '下拉可看更多商品~',\n\t\t\t\tcontentrefresh: '加载中',\n\t\t\t\tcontentnomore: '没有更多商品'\n\t\t\t},\n\t\t\tcolor,\n\t\t\tactiveSubMenuId,\n\t\t\tcurrentPage,\n\t\t\tlimit,\n\t\t\tsubMenus,\n\t\t\tformattedPrice\n\t\t}\n\t},\n\tmethods:{\n\t\tasync fetchData(subMenuId,page,isRefresh = false){\n\t\t\t if(this.loadingStatus == \"loading\") return\n\t\t\t this.activeSubMenuId = subMenuId;\n\t\t\t this.loadingStatus = \"loading\";\n\t\t\t try{\n\t\t\t\t const res = await this.servicePost('app/subMenuList/item/list',{subMenuId,page,limit:this.limit});\n\t\t\t\t const {list, total} = res;\n\t\t\t\t if (isRefresh) {\n\t\t\t\t       this.itemList = [];\n\t\t\t\t }\n\t\t\t\t this.itemList = [...this.itemList,...list];\n\t\t\t\t if (this.itemList.length >= total || list.length < this.limit) {\n\t\t\t\t    this.loadingStatus = 'noMore';\n\t\t\t\t } else {\n\t\t\t\t    this.loadingStatus = 'more';\n\t\t\t\t    currentPage.value = page + 1;\n\t\t\t\t }\n\t\t\t }catch(error){\n\t\t\t\t console.log(error)\n\t\t\t\t this.loadingStatus = 'noMore';\n\t\t\t\t uni.showToast({ title: '加在商品失败！联系客服。', icon: 'none' });\n\t\t\t }\n\t\t},\n\t\tchangeSubMenu(id){\n\t\t\tthis.activeSubMenuId = id;\n\t\t\tthis.currentPage = 1;\n\t\t\tthis.fetchData(id,1,true);\n\t\t},\n\t\tdownSrolltolower(){\n\t\t\tif (this.loadingStatus === 'more') {\n\t\t\t\tthis.fetchData(this.activeSubMenuId,this.currentPage);\n\t\t\t}\n\t\t},\n\t\tclickOldItemDetail(id){\n\t\t\tuni.navigateTo({\n\t\t\t        url: `/pages/itemPage/oldItemPage?id=${id}` // 이동할 페이지 경로\n\t\t\t});\n\t\t},\n\t\tclickNewItemDetail(id){\n\t\t\tuni.navigateTo({\n\t\t\t        url: `/pages/itemPage/newItemPage?id=${id}` // 이동할 페이지 경로\n\t\t\t});\n\t\t}\n\t},\n\tonLoad(op){\n\t\t this.fetchData(op.id,1,true);\n\t\t this.subMenus = JSON.parse(uni.getStorageSync('topSubMenu'));\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.listContainer{\n\t\twidth: 100%;\n\t\t.menuList{\n\t\t\twidth: 100%;\n\t\t\theight: 115px;\n\t\t\twhite-space: nowrap;\n\t\t\t.menubutton{\n\t\t\t\twidth: 250rpx;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\t.top{\n\t\t\t\t\twidth: 250rpx;\n\t\t\t\t\theight: 75px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\timage{\n\t\t\t\t\t\twidth: 120rpx;\n\t\t\t\t\t\theight: 70px;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.bottom{\n\t\t\t\t\twidth: 250rpx;\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\theight: 30px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\tletter-spacing: 3rpx; /* 글자 간격 넓게 */\n\t\t\t\t\ttext-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); /* 부드러운 그림자 */\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tmargin-bottom: 5px;\n\t\t\t\t\t.bottomShow{\n\t\t\t\t\t\twidth: 130rpx;\n\t\t\t\t\t\theight: 8rpx; /* 굵은 줄의 두께 */\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbottom: 0; /* 텍스트 아래로 5px 간격 */\n\t\t\t\t\t\tleft: 60rpx;\n\t\t\t\t\t\tbackground-color: rgb(153, 0, 0,0.8); /* 줄의 기본 색상 */\n\t\t\t\t\t\tborder-radius: 10rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t.itemList{\n\t\tposition: relative;\n\t\t.listItem{\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding:25rpx 25rpx;\n\t\t\t\tdisplay:grid;\n\t\t\t\tgrid-template-columns: repeat(2,1fr);\n\t\t\t\tgap: 20rpx;\n\t\t\t\t.itemContent{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 550rpx;\n\t\t\t\t\tbackground-color: white;\n\t\t\t\t\tborder-radius: 15rpx;\n\t\t\t\t\t.itemTop{\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 300rpx;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\timage{\n\t\t\t\t\t\t\twidth: 75%;\n\t\t\t\t\t\t\theight: 280rpx;\n\t\t\t\t\t\t\tmargin-top: 20rpx;\n\t\t\t\t\t\t\tborder-radius: 10rpx;\n\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t.itemBottom{\n\t\t\t\t\t\theight: 250rpx;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t.itemBottomTitle{\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 38rpx;\n\t\t\t\t\t\t\tmargin-top: 32rpx;\n\t\t\t\t\t\t\tpadding: 0 15rpx;\t\t\t\t\n\t\t\t\t\t\t\tfont-size: 30rpx;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tline-height: 38rpx;\n\t\t\t\t\t\t\tletter-spacing: 3rpx; /* 글자 간격 넓게 */\n\t\t\t\t\t\t\ttext-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* 부드러운 그림자 */\n\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.itemBottom1{\n\t\t\t\t\t\t\twidth: 90%;\n\t\t\t\t\t\t\tmargin-left: 5%;\n\t\t\t\t\t\t\tmargin-top: 20rpx;\n\t\t\t\t\t\t\theight: 60rpx;\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\tborder: 4rpx solid rgb(180, 180, 180);\n\t\t\t\t\t\t\tborder-radius: 10rpx;\n\t\t\t\t\t\t\t.itemBottom1Left{\n\t\t\t\t\t\t\t\twidth: 48%;\n\t\t\t\t\t\t\t\theight: 50rpx;\n\t\t\t\t\t\t\t\tborder-left: 4rpx solid rgb(180, 180, 180);\n\t\t\t\t\t\t\t\tline-height: 50rpx;\n\t\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\t\tfont-size: 27rpx;\n\t\t\t\t\t\t\t\tcolor: rgb(255, 128, 0);\n\t\t\t\t\t\t\t\tletter-spacing: 5rpx; /* 글자 간격 넓게 */\n\t\t\t\t\t\t\t\ttext-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* 부드러운 그림자 */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.itemBottom1Right{\n\t\t\t\t\t\t\t\twidth: 50%;\n\t\t\t\t\t\t\t\theight: 50rpx;\n\t\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\t\tline-height: 50rpx;\n\t\t\t\t\t\t\t\tfont-size: 27rpx;\n\t\t\t\t\t\t\t\tcolor: rgb(255, 128, 0);\n\t\t\t\t\t\t\t\tletter-spacing: 5rpx; /* 글자 간격 넓게 */\n\t\t\t\t\t\t\t\ttext-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* 부드러운 그림자 */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.itemBottom2{\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 90rpx;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tline-height: 90rpx;\n\t\t\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\t\t\tcolor:rgb(102, 102, 255);\n\t\t\t\t\t\t\t.priceT{\n\t\t\t\t\t\t\t\tcolor: rgb(255, 51, 51);\n\t\t\t\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\tletter-spacing: 5rpx; /* 글자 간격 넓게 */\n\t\t\t\t\t\t\t\ttext-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* 부드러운 그림자 */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.price{\n\t\t\t\t\t\t\t\tfont-size: 33rpx;\n\t\t\t\t\t\t\t\tcolor: rgb(80, 80, 80);\n\t\t\t\t\t\t\t\tletter-spacing: 4rpx; /* 글자 간격 넓게 */\n\t\t\t\t\t\t\t\ttext-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* 부드러운 그림자 */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t.loading{\n\t\t\t\theight: 80rpx;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.hiddenLoading{\n\t\t\t\theight: 80rpx;\n\t\t\t\tmargin-bottom: 15rpx;\n\t\t\t}\n\t}\n</style>\n","import MiniProgramPage from '/Users/Coding/uniapp/weixinphone/pages/list/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["getNaviBar","ref","currentPage","servicePost","formattedPrice","uni"],"mappings":";;;;;AA0CA,MAAO,YAAW,MAAW;AAK7B,MAAK,YAAS;AAAA,EACb,YAAW;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAM,CAEL;AAAA,EACD,MAAM,OAAO,SAAS;AACrB,UAAM,eAAeA,iBAAU,WAAA,EAAG,YAAW,IAAG;AAEhD,UAAM,gBAAgBC,kBAAI,MAAM;AAChC,UAAM,QAAQA,kBAAI,kBAAkB;AAEpC,UAAM,kBAAkBA,kBAAI,CAAC;AAE7B,UAAM,WAAWA,kBAAI,CAAA,CAAE;AAEvB,UAAM,WAAWA,kBAAI,CAAA,CAAE;AAEvB,UAAMC,eAAcD,kBAAI,CAAC;AACzB,UAAM,QAAQ;AACd,WAAM;AAAA,mBACLE,cAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA,aAAa;AAAA,QACZ,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,eAAe;AAAA,MACf;AAAA,MACD;AAAA,MACA;AAAA,MACA,aAAAD;AAAA,MACA;AAAA,MACA;AAAA,sBACAE,aAAa;AAAA,IACd;AAAA,EACA;AAAA,EACD,SAAQ;AAAA,IACP,MAAM,UAAU,WAAU,MAAK,YAAY,OAAM;AAC/C,UAAG,KAAK,iBAAiB;AAAW;AACpC,WAAK,kBAAkB;AACvB,WAAK,gBAAgB;AACrB,UAAG;AACF,cAAM,MAAM,MAAM,KAAK,YAAY,6BAA4B,EAAC,WAAU,MAAK,OAAM,KAAK,MAAK,CAAC;AAChG,cAAM,EAAC,MAAM,MAAK,IAAI;AACtB,YAAI,WAAW;AACT,eAAK,WAAW;QACtB;AACA,aAAK,WAAW,CAAC,GAAG,KAAK,UAAS,GAAG,IAAI;AACzC,YAAI,KAAK,SAAS,UAAU,SAAS,KAAK,SAAS,KAAK,OAAO;AAC5D,eAAK,gBAAgB;AAAA,eACjB;AACJ,eAAK,gBAAgB;AACrB,sBAAY,QAAQ,OAAO;AAAA,QAC9B;AAAA,MACA,SAAM,OAAM;AACZC,sBAAAA,MAAA,MAAA,OAAA,8BAAY,KAAK;AACjB,aAAK,gBAAgB;AACrBA,sBAAG,MAAC,UAAU,EAAE,OAAO,gBAAgB,MAAM,OAAO,CAAC;AAAA,MACtD;AAAA,IACD;AAAA,IACD,cAAc,IAAG;AAChB,WAAK,kBAAkB;AACvB,WAAK,cAAc;AACnB,WAAK,UAAU,IAAG,GAAE,IAAI;AAAA,IACxB;AAAA,IACD,mBAAkB;AACjB,UAAI,KAAK,kBAAkB,QAAQ;AAClC,aAAK,UAAU,KAAK,iBAAgB,KAAK,WAAW;AAAA,MACrD;AAAA,IACA;AAAA,IACD,mBAAmB,IAAG;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACP,KAAK,kCAAkC,EAAE;AAAA;AAAA,MACjD,CAAC;AAAA,IACD;AAAA,IACD,mBAAmB,IAAG;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACP,KAAK,kCAAkC,EAAE;AAAA;AAAA,MACjD,CAAC;AAAA,IACF;AAAA,EACA;AAAA,EACD,OAAO,IAAG;AACR,SAAK,UAAU,GAAG,IAAG,GAAE,IAAI;AAC3B,SAAK,WAAW,KAAK,MAAMA,cAAAA,MAAI,eAAe,YAAY,CAAC;AAAA,EAC5D;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtIA,GAAG,WAAW,eAAe;"}