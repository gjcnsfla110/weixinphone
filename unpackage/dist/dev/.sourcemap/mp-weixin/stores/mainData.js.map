{"version":3,"file":"mainData.js","sources":["stores/mainData.js"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport { serviceGet,servicePost } from \"../utill/request\";\nimport { resultPage } from \"../utill/common\";\nexport const useMainStores = defineStore('mainData',{\n\tstate:()=>({\n\t\tmain:{},\n\t\tiphone:{},\n\t\tsamsung:{},\n\t\tsubMenu:[],\n\t\tisLoading: false,\n        isDataReady: false\n\t}),\n\tgetters:{\n\t\tisDataAvailable: (state) => state.isDataReady && !state.isLoading,\n\t},\n\tactions:{\n\t\tasync lodingMain(){\n\t\t\tif (this.isDataReady) return;\n            this.isLoading = true;\n\t\t\ttry{\n\t\t\t\tconst res = await serviceGet('app/index/main');\n\t\t\t\tthis.subMenu = res.subMenus;\n\t\t\t\tlet pages = res.pages;\n\t\t\t\tlet components = res.components;\n\t\t\t\tlet componentItems = res.componentItems;\n\t\t\t\tlet componentBanners = res.componentBanners;\n\t\t\t\tpages = resultPage(pages,components,componentItems,componentBanners);\n\t\t\t\tthis.main = pages.filter(item=>item.page_key == 'main');\n\t\t\t\tthis.iphone = pages.filter(item=>item.page_key == 'iphone');\n\t\t\t\tthis.samsung = pages.filter(item=>item.page_key == 'samsung');\n\t\t\t\tthis.isDataReady = true;\n\t\t\t}catch(error){\n\t\t\t\tconsole.error('Error loading main data:', error);\n\t\t\t}finally{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n})"],"names":["defineStore","serviceGet","resultPage","uni"],"mappings":";;;;AAGY,MAAC,gBAAgBA,cAAW,YAAC,YAAW;AAAA,EACnD,OAAM,OAAK;AAAA,IACV,MAAK,CAAE;AAAA,IACP,QAAO,CAAE;AAAA,IACT,SAAQ,CAAE;AAAA,IACV,SAAQ,CAAE;AAAA,IACV,WAAW;AAAA,IACL,aAAa;AAAA,EACrB;AAAA,EACC,SAAQ;AAAA,IACP,iBAAiB,CAAC,UAAU,MAAM,eAAe,CAAC,MAAM;AAAA,EACxD;AAAA,EACD,SAAQ;AAAA,IACP,MAAM,aAAY;AACjB,UAAI,KAAK;AAAa;AACb,WAAK,YAAY;AAC1B,UAAG;AACF,cAAM,MAAM,MAAMC,yBAAW,gBAAgB;AAC7C,aAAK,UAAU,IAAI;AACnB,YAAI,QAAQ,IAAI;AAChB,YAAI,aAAa,IAAI;AACrB,YAAI,iBAAiB,IAAI;AACzB,YAAI,mBAAmB,IAAI;AAC3B,gBAAQC,aAAU,WAAC,OAAM,YAAW,gBAAe,gBAAgB;AACnE,aAAK,OAAO,MAAM,OAAO,UAAM,KAAK,YAAY,MAAM;AACtD,aAAK,SAAS,MAAM,OAAO,UAAM,KAAK,YAAY,QAAQ;AAC1D,aAAK,UAAU,MAAM,OAAO,UAAM,KAAK,YAAY,SAAS;AAC5D,aAAK,cAAc;AAAA,MACnB,SAAM,OAAM;AACZC,sBAAc,MAAA,MAAA,SAAA,4BAAA,4BAA4B,KAAK;AAAA,MACnD,UAAI;AACA,aAAK,YAAY;AAAA,MACjB;AAAA,IAED;AAAA,EACD;AACF,CAAC;;"}